[gd_scene load_steps=7 format=3 uid="uid://cfaldipc5l1l4"]

[ext_resource type="PackedScene" uid="uid://bp28b7drlwoma" path="res://scenes/entities/player/knight_skin.tscn" id="1_1hmtu"]
[ext_resource type="Script" uid="uid://cipww6kawrowp" path="res://scenes/entities/player/player.gd" id="1_58kc7"]
[ext_resource type="PackedScene" uid="uid://bh7gkxhgw7roh" path="res://scenes/entities/player/camera_controller.tscn" id="2_635qg"]
[ext_resource type="PackedScene" uid="uid://tfbpi1ybvvvt" path="res://scenes/entities/player/pause_menu.tscn" id="5_8akj5"]
[ext_resource type="PackedScene" uid="uid://by7eelq332a0j" path="res://scenes/entities/player/ui.tscn" id="5_bjvvg"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_58kc7"]
radius = 0.40064

[node name="Player" type="CharacterBody3D" groups=["Player"]]
collision_layer = 2
collision_mask = 5
script = ExtResource("1_58kc7")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
shape = SubResource("CapsuleShape3D_58kc7")

[node name="CameraController" parent="." instance=ExtResource("2_635qg")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
spring_length = 8.0
margin = 0.04
min_limit_x = -1.0
max_limit_x = -0.2

[node name="skin" parent="." instance=ExtResource("1_1hmtu")]

[node name="Skeleton3D" parent="skin/Rig" index="0"]
bones/1/position = Vector3(0, 0.388859, 0)
bones/4/rotation = Quaternion(-0.558862, -0.0600533, -0.642467, 0.520868)
bones/5/rotation = Quaternion(3.05882e-08, -5.31625e-08, -0.49902, 0.86659)
bones/7/rotation = Quaternion(-0.3213, -0.327353, 0.146932, 0.876366)
bones/8/rotation = Quaternion(0.000149625, 0.000149617, -0.706557, 0.707656)
bones/14/rotation = Quaternion(-0.617199, 0.0800134, 0.616814, 0.481876)
bones/15/rotation = Quaternion(2.73375e-08, 5.02841e-08, 0.522031, 0.852927)
bones/17/rotation = Quaternion(-0.319656, 0.302752, -0.228635, 0.868267)
bones/18/rotation = Quaternion(0.000420226, 0.000494961, 0.706671, 0.707542)
bones/24/rotation = Quaternion(0.993383, 0.0833615, 0.0745941, 0.0260038)
bones/25/rotation = Quaternion(0.234807, 6.46728e-08, -1.62918e-07, 0.972042)
bones/26/rotation = Quaternion(-0.537941, -0.208286, 0.0496477, 0.815336)
bones/28/rotation = Quaternion(0.996574, -0.0300721, 0.0312345, 0.0704298)
bones/29/rotation = Quaternion(0.303287, -6.39568e-08, 2.11473e-07, 0.952899)
bones/30/rotation = Quaternion(-0.574608, 0.114305, -0.0110751, 0.810332)
bones/47/position = Vector3(0.520841, 0.786776, -0.0576373)
bones/49/position = Vector3(-0.510844, 0.786776, 0.0597369)

[node name="1H_Sword_Offhand" parent="skin/Rig/Skeleton3D" index="0"]
transform = Transform3D(-9.40569e-08, 0.262864, 0.964832, 0.999998, -0.00155297, 0.000423428, 0.00160985, 0.964831, -0.262863, 0.512188, 0.635318, -0.00184282)

[node name="Badge_Shield" parent="skin/Rig/Skeleton3D" index="1"]
transform = Transform3D(-7.164e-08, 0.262863, 0.964832, 0.999998, -0.0015555, 0.000424095, 0.00161247, 0.964831, -0.262863, 0.662591, 0.635384, -0.0428194)

[node name="Rectangle_Shield" parent="skin/Rig/Skeleton3D" index="2"]
transform = Transform3D(-7.164e-08, 0.262863, 0.964832, 0.999998, -0.0015555, 0.000424095, 0.00161247, 0.964831, -0.262863, 0.662591, 0.635384, -0.0428194)

[node name="Round_Shield" parent="skin/Rig/Skeleton3D" index="3"]
transform = Transform3D(-7.164e-08, 0.262863, 0.964832, 0.999998, -0.0015555, 0.000424095, 0.00161247, 0.964831, -0.262863, 0.662591, 0.635384, -0.0428194)

[node name="Spike_Shield" parent="skin/Rig/Skeleton3D" index="4"]
transform = Transform3D(-7.164e-08, 0.262863, 0.964832, 0.999998, -0.0015555, 0.000424095, 0.00161247, 0.964831, -0.262863, 0.662591, 0.635384, -0.0428194)

[node name="1H_Sword" parent="skin/Rig/Skeleton3D" index="5"]
transform = Transform3D(-0.000289734, -0.151174, 0.988506, 0.999998, -0.00123161, 0.000104453, 0.00120207, 0.988506, 0.151174, -0.495996, 0.639671, 0.139787)

[node name="2H_Sword" parent="skin/Rig/Skeleton3D" index="6"]
transform = Transform3D(-0.000289749, -0.151174, 0.988506, 0.999998, -0.00123162, 0.000104467, 0.00120208, 0.988506, 0.151174, -0.495996, 0.639671, 0.139787)

[node name="Knight_Helmet" parent="skin/Rig/Skeleton3D" index="7"]
transform = Transform3D(0.99972, -1.40143e-09, 0.0236466, 1.39341e-09, 1, 3.55686e-10, -0.0236466, -3.22637e-10, 0.99972, 4.69869e-07, 1.19909, -1.19779e-07)

[node name="Knight_Cape" parent="skin/Rig/Skeleton3D" index="8"]
transform = Transform3D(0.996275, -5.14962e-09, 0.0862353, 5.13043e-09, 1, 4.44077e-10, -0.0862353, 1.88007e-15, 0.996275, -1.63023e-08, 1.19909, -1.40136e-07)

[node name="BoneAttachment3D" parent="skin/Rig/Skeleton3D" index="15"]
transform = Transform3D(0.000289689, -0.151174, -0.988506, -0.999998, -0.00123134, -0.000104448, -0.00120181, 0.988506, -0.151174, -0.49096, 0.639712, 0.10686)

[node name="AnimationPlayer" parent="skin" index="1"]
autoplay = "Idle"

[node name="AnimationTree" parent="skin" index="2"]
parameters/ShieldBlend/blend_amount = 0.0

[node name="Timers" type="Node" parent="."]

[node name="StaminaRecoveryTimer" type="Timer" parent="Timers"]
wait_time = 0.15
autostart = true

[node name="InvulTimer" type="Timer" parent="Timers"]
wait_time = 0.8
one_shot = true

[node name="UI" parent="." instance=ExtResource("5_bjvvg")]

[node name="PauseMenu" parent="." instance=ExtResource("5_8akj5")]
process_mode = 2
visible = false

[connection signal="timeout" from="Timers/StaminaRecoveryTimer" to="." method="_on_stamina_recovery_timer_timeout"]

[editable path="skin"]
