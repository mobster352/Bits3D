[gd_scene load_steps=7 format=3 uid="uid://cfaldipc5l1l4"]

[ext_resource type="PackedScene" uid="uid://bp28b7drlwoma" path="res://scenes/entities/player/knight_skin.tscn" id="1_1hmtu"]
[ext_resource type="Script" uid="uid://cipww6kawrowp" path="res://scenes/entities/player/player.gd" id="1_58kc7"]
[ext_resource type="PackedScene" uid="uid://bh7gkxhgw7roh" path="res://scenes/entities/player/camera_controller.tscn" id="2_635qg"]
[ext_resource type="PackedScene" uid="uid://tfbpi1ybvvvt" path="res://scenes/entities/player/pause_menu.tscn" id="5_8akj5"]
[ext_resource type="PackedScene" uid="uid://by7eelq332a0j" path="res://scenes/entities/player/ui.tscn" id="5_bjvvg"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_58kc7"]
radius = 0.40064

[node name="Player" type="CharacterBody3D" groups=["Player"]]
collision_layer = 2
collision_mask = 5
script = ExtResource("1_58kc7")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
shape = SubResource("CapsuleShape3D_58kc7")

[node name="CameraController" parent="." instance=ExtResource("2_635qg")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2, 0)
spring_length = 10.0
margin = 0.04
min_limit_x = -0.8
max_limit_x = 0.2
mouse_acceleration = 0.003

[node name="skin" parent="." instance=ExtResource("1_1hmtu")]

[node name="Skeleton3D" parent="skin/Rig" index="0"]
bones/1/position = Vector3(0, 0.368931, 0)
bones/4/rotation = Quaternion(-0.551311, -0.0564745, -0.637989, 0.534636)
bones/5/rotation = Quaternion(3.2756e-08, -6.97631e-08, -0.515948, 0.85662)
bones/7/rotation = Quaternion(-0.321318, -0.3389, 0.149781, 0.871474)
bones/8/rotation = Quaternion(0.00102448, 0.00102448, -0.703336, 0.710856)
bones/14/rotation = Quaternion(-0.609922, 0.0770154, 0.61357, 0.495577)
bones/15/rotation = Quaternion(1.97804e-08, 4.73985e-08, 0.538299, 0.842754)
bones/17/rotation = Quaternion(-0.320416, 0.315097, -0.231988, 0.862687)
bones/18/rotation = Quaternion(0.00320772, 0.00377823, 0.703766, 0.710415)
bones/24/rotation = Quaternion(0.989484, 0.0837667, 0.0788016, 0.0877238)
bones/25/rotation = Quaternion(0.39679, 6.30376e-08, -2.67179e-07, 0.91791)
bones/26/rotation = Quaternion(-0.622439, -0.200716, 0.077075, 0.752557)
bones/28/rotation = Quaternion(0.991322, -0.0334245, 0.0297817, 0.123603)
bones/29/rotation = Quaternion(0.44073, -5.78088e-08, 3.07397e-07, 0.89764)
bones/30/rotation = Quaternion(-0.648368, 0.112438, -0.0235223, 0.752611)
bones/47/position = Vector3(0.520841, 0.774115, -0.0576374)
bones/49/position = Vector3(-0.510844, 0.774115, 0.0597369)

[node name="1H_Sword_Offhand" parent="skin/Rig/Skeleton3D" index="0"]
transform = Transform3D(9.6084e-07, 0.262863, 0.964832, 0.999938, -0.0106359, 0.00289695, 0.0110236, 0.964774, -0.262848, 0.511802, 0.622582, -0.000898741)

[node name="Badge_Shield" parent="skin/Rig/Skeleton3D" index="1"]
transform = Transform3D(9.83257e-07, 0.262863, 0.964832, 0.999938, -0.0106385, 0.00289761, 0.0110262, 0.964774, -0.262848, 0.662205, 0.623034, -0.0418728)

[node name="Rectangle_Shield" parent="skin/Rig/Skeleton3D" index="2"]
transform = Transform3D(9.83257e-07, 0.262863, 0.964832, 0.999938, -0.0106385, 0.00289761, 0.0110262, 0.964774, -0.262848, 0.662205, 0.623034, -0.0418728)

[node name="Round_Shield" parent="skin/Rig/Skeleton3D" index="3"]
transform = Transform3D(9.83257e-07, 0.262863, 0.964832, 0.999938, -0.0106385, 0.00289761, 0.0110262, 0.964774, -0.262848, 0.662205, 0.623034, -0.0418728)

[node name="Spike_Shield" parent="skin/Rig/Skeleton3D" index="4"]
transform = Transform3D(9.83257e-07, 0.262863, 0.964832, 0.999938, -0.0106385, 0.00289761, 0.0110262, 0.964774, -0.262848, 0.662205, 0.623034, -0.0418728)

[node name="1H_Sword" parent="skin/Rig/Skeleton3D" index="5"]
transform = Transform3D(-0.00225326, -0.159644, 0.987171, 0.999955, -0.00940733, 0.000760674, 0.00916557, 0.987129, 0.159658, -0.495664, 0.627005, 0.140694)

[node name="2H_Sword" parent="skin/Rig/Skeleton3D" index="6"]
transform = Transform3D(-0.00225327, -0.159644, 0.987171, 0.999955, -0.00940735, 0.000760688, 0.00916558, 0.987129, 0.159658, -0.495664, 0.627005, 0.140694)

[node name="Knight_Helmet" parent="skin/Rig/Skeleton3D" index="7"]
transform = Transform3D(0.99972, -1.40143e-09, 0.0236466, 1.39341e-09, 1, 3.55686e-10, -0.0236466, -3.22637e-10, 0.99972, 4.69869e-07, 1.17916, -1.19779e-07)

[node name="Knight_Cape" parent="skin/Rig/Skeleton3D" index="8"]
transform = Transform3D(0.996275, -5.14962e-09, 0.0862353, 5.13043e-09, 1, 4.44077e-10, -0.0862353, 1.88007e-15, 0.996275, -1.63023e-08, 1.17916, -1.40136e-07)

[node name="BoneAttachment3D" parent="skin/Rig/Skeleton3D" index="15"]
transform = Transform3D(0.00225321, -0.159644, -0.987171, -0.999955, -0.00940707, -0.000760668, -0.00916531, 0.987129, -0.159659, -0.490347, 0.627319, 0.107814)

[node name="AnimationPlayer" parent="skin" index="1"]
autoplay = "Idle"

[node name="AnimationTree" parent="skin" index="2"]
parameters/ShieldBlend/blend_amount = 0.0

[node name="Timers" type="Node" parent="."]

[node name="StaminaRecoveryTimer" type="Timer" parent="Timers"]
wait_time = 0.15
autostart = true

[node name="InvulTimer" type="Timer" parent="Timers"]
wait_time = 0.8
one_shot = true

[node name="UI" parent="." instance=ExtResource("5_bjvvg")]

[node name="PauseMenu" parent="." instance=ExtResource("5_8akj5")]
process_mode = 2
visible = false

[connection signal="timeout" from="Timers/StaminaRecoveryTimer" to="." method="_on_stamina_recovery_timer_timeout"]

[editable path="skin"]
